gold<-read.csv("Downloads/gold.csv",colClasses = c("Date","numeric"))
gold<-read.csv("Downloads/gold.csv",colClasses = c("Date","numeric"))
class(gold$Date)
save(gold,file = "/Users/CDX/gold.RData")
load("/Users/CDX/gold.RData")
#class(gold$Date)
class(gold$Date)
gold<-arrange(gold,Date)
gold<-read.csv("Downloads/gold.csv",colClasses = c("Date","numeric"))
library(dplyr)
head(gold)
gold<-arrange(gold,Date)
library(quantmod)
gold<-.xts(gold$Value,index = gold$Date)
chartSeries(gold,theme = "white")
r<-dailyReturn(gold,type = "log")
chartSeries(r,theme = "white")
Box.test(r,lag=10,type = "Ljung-Box")
ar1<-ar(unclass(r)[,1],method = "mle")
plot(1:12,ar1$aic[2:13],main = "AIC 1:12",type = "b")
fit<-arima(r,order=c(8,0,0))
fit
mean(r)
fit$coef
fit$coef[9]
r2<-2-fit$coef[9]
arima(r2,order=c(8,0,0))
arima(r2,order=c(8,0,0),iinclude.mean = F)
arima(r,order=c(8,0,0),iinclude.mean = F)
?ma
?arima
install.packages("TSA")
library(quantmod)
getSymbols("AAPL")
AAPL
r<- dailyReturn(AAPL,type = "log")
plot(r)
which.min(r)
index(r)[which.min(r)]
r<-r[-which.min(r)]
plot(r)
arima(r)
arima(r,model=list(1,0,1))
?arima
arima(r,order=c(1,0,1))
head(AAPL)
unlist(AAPL)
untype(AAPL)
log(AAPL)
HEAD(log(AAPL))
head(log(AAPL))
r<- dailyReturn(Ad(AAPL),type = "log")
index(r)[which.min(r)]
r<-r[-which.min(r)]
r<- dailyReturn(Ad(AAPL),type = "log")
plot(r)
arima(r,order=c(1,0,1))
arima(r,order = c(1,0,1))
arima(r,order=c(1,0,1))
arima(r,order=c(1,0,0))
arima(r,order = c(1,0,0),include.mean = FALSE)
?arima
curve(pcauchy(x,0,1),xlim = c(-5,5))
curve(dcauchy(x,0,1),xlim = c(-5,5))
curve(dt(x,1),xlim = c(-5,5))
curve(dt(x,1),xlim = c(-5,5),add = T)
curve(dcauchy(x,0,1),xlim = c(-5,5),add = T)
install.packages("ime4")
install.packages("car")
library(car)
install.packages("~/Downloads/lme4_1.1-9.tgz",type = "source")
install.packages("ime4")
install.packages("ime4",type = "source")
install.packages("quadprog")
library(quadprog)
load("~/Downloads/obamacare_labeled.RData")
library(xlsx)
iden<-read.xlsx2("~/R_twitter_politics/labeled_tweet/elite/sorted_unique_users.xlsx",1,
,colClasses =c("character","character","character","logical"
getid<-sapply(obamacare_labeled,function(x) c(x$user$id_str,x$screen_name))
library(dplyr)
colIndex = c(3,5:9,12)
,"numeric","numeric","character"),stringsAsFactors=F)
getid<-distinct(getid)
options(java.parameters = "-Xmx4000m")#solve the memory problem
options(java.parameters = "-Xmx4000m")#solve the memory problem
library(xlsx)
library(dplyr)
iden<-read.xlsx2("~/R_twitter_politics/labeled_tweet/elite/sorted_unique_users.xlsx",1,
colIndex = c(3,5:9,12)
,colClasses =c("character","character","character","logical"
,"numeric","numeric","character"),stringsAsFactors=F)
getid<-sapply(obamacare_labeled,function(x) c(x$user$id_str,x$screen_name))
getid<-distinct(getid)
duplicated(getid)
getid<- getid[!duplicated(getid),]
head(getid)
getid
getid<-sapply(obamacare_labeled,function(x) c(x$user$id_str,x$user$screen_name))
dim(getid)
getid<-as.data.frame(t(getid))
head(getid)
names(getid)<-c("id","screen_name")
duplicated(getid )
dim(duplicated(getid))
getid<- getid[!duplicated(getid$id),]
head(getid)
dim(getid)
dim(iden)
obamacare<-obamacare_labeled
vertices_list<-t(sapply(obamacare,FUN = function(x) c(x$user$id_str,x$user$name)))
vertices2<-function(x){
if(!identical(NULL,x$retweeted_status)) return(c(x$retweeted_status$user$id_str,x$retweeted_status$user$name))
else return(c(NA,NA))
}
vertices_list2<-t(sapply(obamacare,FUN = vertices2))
vertices_list2<-vertices_list2[!is.na(vertices_list2[,1]),]
vertices_list<-rbind(vertices_list,vertices_list2)
colnames(vertices_list)<-c("id","name")
vertices_list<-as.data.frame(vertices_list,stringsAsFactors = F)
head(vertices_list)
vertices_list<-t(sapply(obamacare,FUN = function(x) c(x$user$id_str,x$user$screen_name)))
vertices2<-function(x){
if(!identical(NULL,x$retweeted_status)) return(c(x$retweeted_status$user$id_str,x$retweeted_status$user$screen_name))
else return(c(NA,NA))
}
vertices_list2<-t(sapply(obamacare,FUN = vertices2))
vertices_list2<-vertices_list2[!is.na(vertices_list2[,1]),]
vertices_list<-rbind(vertices_list,vertices_list2)
colnames(vertices_list)<-c("id","screen_name")
vertices_list<-as.data.frame(vertices_list,stringsAsFactors = F)
head(vertices_list)
dim(vertices_list)
sum(duplicated(vertices_list))
getid<- vertices_list[!duplicated(vertices_list$id),]
dim(getid)
getid<- vertices_list[!duplicated(vertices_list$screen_name),]
dim(getid)
getid<- vertices_list[!duplicated(vertices_list$id),]
head(iden)
new_iden<-merge(iden,getid)
head(new())
head(new_iden)
new_iden<-select(new_iden,c(id,screen_nam,name,ideology,followers_count,retweet_count))
new_iden<-select(new_iden,c(id,screen_name,name,ideology,followers_count,retweet_count))
write.csv(new_iden,"new_iden.csv")
getwd()
setwd("~/R_twitter_politics/des_table")
head(new_iden)
elite$elite<-TRUE
elites1<-read.csv("../labeled_tweet/elite/elite_t.csv",header = T,)
elites2<-read.csv("../labeled_tweet/elite/elite_f.csv",header = T)
elite<-rbind(elites1[c(2,6)],elites2[c(3,2)]);head(elite)
names(elite)<-c("screen_name","ideology")
elite$elite<-TRUE
head(new_iden)
head(elite)
?merge
sum(is.na(new_iden))
a<-data.frame(id=c(1,2),value=4:5)
b<-data.frame(id=c(1,2),volume=3:4)
merge(a,b)
a<-data.frame(id=c(1,2,3),value=4:6)
merge(a,b)
merge(a,b,by.x = T)
merge(a,b,all.x =T)
merge(new_iden,all.x = T)
new<-merge(new_iden,elite,all.x = T)
head(new)
dim(new)
dim(new_iden)
new$elite[is.na(new$elite)]<-FALSE
head(new)
write.csv(new,"new_iden.csv")
dim(iden)
dim(new_iden)
new_iden<-merge(iden,getid)
dim(new_iden)
dim(iden)
new_iden<-merge(iden,getid,all.x = TRUE)
new_iden<-select(new_iden,c(id,screen_name,name,ideology,followers_count,retweet_count))
write.csv(new_iden,"new_iden.csv")
dim(new_iden)
is.na(new_iden$id)
(is.na(new_iden$id))sum
sum(is.na(new_iden$id))
dim(getid)
sum(new$elite)
1056/2
sum(elite$elite)
new_iden<-merge(iden,getid,all.x = TRUE)
new_iden<-select(new_iden,c(id,screen_name,name,ideology,followers_count,retweet_count))
write.csv(new_iden,"new_iden.csv")
#######add elites label #####
elites1<-read.csv("../labeled_tweet/elite/elite_t.csv",header = T,)
elites2<-read.csv("../labeled_tweet/elite/elite_f.csv",header = T)
elite<-rbind(elites1[c(2,6)],elites2[c(3,2)]);head(elite)
names(elite)<-c("screen_name","ideology")
elite$elite<-TRUE
head(elite)
head(new_iden)
new<-merge(new_iden,elite,all.x = T)
new$elite[is.na(new$elite)]<-FALSE
write.csv(new,"new_iden.csv")
dim(new)
new[is.na(new$id),]
sum(new$elite)
1073/2
new[is.na(new$id),]$elite
sum(new[is.na(new$id),]$elite)
new[new[is.na(new$id),]$elite==TRUE,]
new[new[is.na(new$id),]$elite==TRUE,]
filter(new,id==NA &elite==TRUE)
filter(new,is.na(id) &elite==TRUE)
vertices_list$screen_name=="AAN"
SUM(vertices_list$screen_name=="AAN")
sum(vertices_list$screen_name=="AAN")
vertices_list$id[(vertices_list$screen_name=="AAN")]
head(new)
vertices_list$id[(vertices_list$screen_name=="Rebecca Prisaznuk")]
vertices_list$id[(vertices_list$screen_name=="_beccap")]
new_iden<-merge(iden,getid,all.x = TRUE,by="screen_name")
new_iden<-select(new_iden,c(id,screen_name,name,ideology,followers_count,retweet_count))
write.csv(new_iden,"new_iden.csv")
#######add elites label #####
elites1<-read.csv("../labeled_tweet/elite/elite_t.csv",header = T,)
elites2<-read.csv("../labeled_tweet/elite/elite_f.csv",header = T)
elite<-rbind(elites1[c(2,6)],elites2[c(3,2)]);head(elite)
names(elite)<-c("screen_name","ideology")
elite$elite<-TRUE
head(elite)
head(new_iden)
head(elite)
new<-merge(new_iden,elite,all.x = T,by = "screen_name")
new$elite[is.na(new$elite)]<-FALSE
filter(new,is.na(id) &elite==TRUE)
new_iden$id[new_iden$screen_name=="AAN"]
iden[iden$screen_name=="AAN",]
getid[getid$screen_name=="AAN",]
getid<- vertices_list[!duplicated(vertices_list$screen_name),]
new_iden<-merge(iden,getid,all.x = TRUE,by="screen_name")
new_iden<-select(new_iden,c(id,screen_name,name,ideology,followers_count,retweet_count))
write.csv(new_iden,"new_iden.csv")
#######add elites label #####
elites1<-read.csv("../labeled_tweet/elite/elite_t.csv",header = T,)
elites2<-read.csv("../labeled_tweet/elite/elite_f.csv",header = T)
elite<-rbind(elites1[c(2,6)],elites2[c(3,2)]);head(elite)
names(elite)<-c("screen_name","ideology")
elite$elite<-TRUE
head(elite)
head(new_iden)
new<-merge(new_iden,elite,all.x = T,by = "screen_name")
new$elite[is.na(new$elite)]<-FALSE
filter(new,is.na(id) &elite==TRUE)
filter(new,is.na(id) &elite==FALSE)
write.csv(new,"new_iden.csv")
filter(new,is.na(id) &elite==TRUE)
setwd("~/R_twitter_politics/des_table")
read.csv("new_iden.csv",header = TRUE)
iden<-read.csv("new_iden.csv",header = TRUE)
head(iden)
library(dplyr)
iden<-select(iden,-(ideology.y))
head(iden)
iden<-rename(iden,ideology=ideology.x)
head(iden)
load("~/Downloads/tweet_conserv.RData")
iden<-filter(iden,elite==TRUE)
user_num=c(nrow(iden), nrow(filter(iden,ideology=="C")),nrow(filter(iden,ideology=="L")))
user_num
iden<-read.csv("new_iden.csv",header = TRUE)
head(iden)
iden<-select(iden,-(ideology.y))
iden<-rename(iden,ideology=ideology.x)
library(dplyr)
head(iden)
iden<-select(iden,-(ideology.y))
iden<-rename(iden,ideology=ideology.x)
head(iden)
user_num=c(nrow(iden), nrow(filter(iden,ideology=="C")),nrow(filter(iden,ideology=="L")))
followers_num= c(sum(iden$followers_count),sum(filter(iden,ideology=="C")$followers_count),sum(filter(iden,ideology=="L")$followers_count))
following_num= rep(NA,3)
total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_liberal),length(tweet_liberal))
followers_num
load("~/Downloads/tweet_conserv.RData")
iden$screen_name
||
|
T|T
T||T
T||f
T||F
F||F
F||T
F|T
T|F
iden$id
iden<-filter(iden,elite==TRUE)
for(i in length(tweet_conserv)){
if(tweet_conserv[[i]]$user$screen_name %in% iden$screen_name ||
tweet_conserv[[i]]$user$id_str %in% iden$id ) tweet_conserv[[i]]$elite==TRUE
}
iden<-filter(iden,elite==TRUE)
for(i in 1:length(tweet_conserv)){
if(tweet_conserv[[i]]$user$screen_name %in% iden$screen_name ||
tweet_conserv[[i]]$user$id_str %in% iden$id ){
tweet_conserv[[i]]$elite==TRUE
}
}
for(i in 1:length(tweet_liberal)){
if(tweet_liberal[[i]]$user$screen_name %in% iden$screen_name ||
tweet_liberal[[i]]$user$id_str %in% iden$id ){
tweet_liberal[[i]]$elite==TRUE
}
}
load("~/Downloads/tweet_liberal.RData")
for(i in 1:length(tweet_liberal)){
if(tweet_liberal[[i]]$user$screen_name %in% iden$screen_name ||
tweet_liberal[[i]]$user$id_str %in% iden$id ){
tweet_liberal[[i]]$elite==TRUE
}
}
tweet_conserv<-lapply(tweet_conserv, function(x) if(x$elite) x)
tweet_conserv<- lapply(tweet_conserv, function(x) if(x$elite) x)
tweet_liberal[1]$elite
a<-list()
a<-list(list(a=1,b=2),list(a=3,b=4))
a
a[[1]]$c=3
a[[1]]
a
a[[2]]$c
tweet_conserv<- lapply(tweet_conserv, function(x) if(is.null(x$elite)) FALSE)
tweet_conserv<-lapply(tweet_conserv, function(x) if(is.null(x$elite)) FALSE)
load("~/Downloads/tweet_conserv.RData")
for(i in 1:length(tweet_conserv)){
if(tweet_conserv[[i]]$user$screen_name %in% iden$screen_name ||
tweet_conserv[[i]]$user$id_str %in% iden$id ){
tweet_conserv[[i]]$elite==TRUE
}
}
tweet_conserv_elite<- lapply(tweet_conserv, function(x) if(is.null(x$elite)) FALSE)
tweet_conserv<-tweet_conserv[tweet_conserv_elite]
tweet_conserv<-tweet_conserv[[tweet_conserv_elite]]
tweet_conserv_elite
tweet_conserv_elite<- sapply(tweet_conserv, function(x) if(is.null(x$elite)) FALSE else TRUE)
tweet_conserv<-tweet_conserv[[tweet_conserv_elite]]
tweet_conserv_elite
sum(tweet_conserv_elite)
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id) ){
tweet_conserv[[i]]$elite==TRUE
}else{
tweet_conserv[[i]]$elite==FALE
}
}
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id) ){
tweet_conserv[[i]]$elite==TRUE
}else{
tweet_conserv[[i]]$elite==FALSE
}
}
tweet_conserv[[1]]$elite
tweet_conserv[[1]]$elite<-FALSE
tweet_conserv[[1]]$elite
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id) ){
tweet_conserv[[i]]$elite<-TRUE
}else{
tweet_conserv[[i]]$elite<-FALSE
}
}
for(i in 1:length(tweet_liberal)){
if((tweet_liberal[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_liberal[[i]]$user$id_str %in% iden$id)){
tweet_liberal[[i]]$elite<-TRUE
}else{
tweet_liberal[[i]]$elite<-FALSE
}
}
tweet_conserv_elite<- sapply(tweet_conserv, function(x) if(x$elite) FALSE else TRUE)
tweet_conserv<-tweet_conserv[[tweet_conserv_elite]]
tweet_liberal_elite<-lapply(tweet_conserv, function(x) if(is.null(x$elite)) FALSE else TRUE)
tweet_conserv_elite
tweet_conserv<-tweet_conserv[tweet_conserv_elite]
tweet_liberal_elite<-lapply(tweet_conserv, function(x) if(is.null(x$elite)) FALSE else TRUE)
tweet_liberal_elite<-lapply(tweet_conserv, function(x) if(x$elite) TRUE else FALSE)
tweet_liberal_elite<-sapply(tweet_liberal, function(x) x$elite)
tweet_liberal<-tweet_liberal[tweet_liberal_elite]
tweet_liberal[[1]]$elite
load("~/Downloads/tweet_conserv.RData")
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id) ){
tweet_conserv[[i]]$elite<-TRUE
}else{
tweet_conserv[[i]]$elite<-FALSE
}
tweet_conserv<-tweet_conserv[tweet_conserv_elite]
}
tweet_conserv_elite<- sapply(tweet_conserv, function(x) x$elite)
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id) ){
tweet_conserv[[i]]$elite<-TRUE
}else{
tweet_conserv[[i]]$elite<-FALSE
}
}
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id)){
tweet_conserv[[i]]$elite<-TRUE
}else{
tweet_conserv[[i]]$elite<-FALSE
}
}
tweet_conserv[[1]]$e''
tweet_conserv[[1]]$elite
length(tweet_conserv)
tweet_conserv[[10021]]$elite
tweet_conserv_elite
load("~/Downloads/tweet_conserv.RData")
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
for(i in 1:length(tweet_conserv)){
if((tweet_conserv[[i]]$user$screen_name %in% iden$screen_name) ||
(tweet_conserv[[i]]$user$id_str %in% iden$id)){
tweet_conserv[[i]]$elite<-TRUE
}else{
tweet_conserv[[i]]$elite<-FALSE
}
}
tweet_conserv_elite<- sapply(tweet_conserv, function(x) x$elite)
tweet_conserv_elite
tweet_conserv<-tweet_conserv[tweet_conserv_elite]
tweet_conserv[[1]]$elite
save(tweet_conserv_elite,file = "conserv_elite.RData")
load("liberal_elite.RData")
load("conserv_elite.RData")
load("liberal_elite.RData")
save(tweet_liberal_elite,file = "liberal_elite.RData")
load("liberal_elite.RData")
, total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_liberal),length(tweet_liberal))
total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_liberal),length(tweet_liberal))
total_tweets
total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_conserv),length(tweet_liberal))
total_tweets
x1 <- strptime(tweet_liberal[[1]]$created_at
,format="%a %b %d %H:%M:%S %z %Y",tz = "UTC")#see ?strftime for %
time_stamp<-sapply(tweet_liberal,FUN = function(x) return(as.POSIXct(x$created_at,
format="%a %b %d %H:%M:%S %z %Y",
tz = "UTC")))
time_stamp<-time_stamp+(x1-time_stamp[1])##origin "1970-01-01 GMT"
time_stamp<-strftime(time_stamp, format="%D")#day/month/year
time_index<-time_stamp#copy
(volume<-data.frame(table(time_index)))
volume$time_index<-as.character(volume$time_index)
volume_liberal<-volume
save(volume_liberal,file = "volume_liberal.RData")
load("volume_liberal.RData")
x1 <- strptime(tweet_conserv[[1]]$created_at
,format="%a %b %d %H:%M:%S %z %Y",tz = "UTC")#see ?strftime for %
time_stamp<-sapply(tweet_conserv,FUN = function(x) return(as.POSIXct(x$created_at,
format="%a %b %d %H:%M:%S %z %Y",
tz = "UTC")))
time_stamp<-time_stamp+(x1-time_stamp[1])##origin "1970-01-01 GMT"
time_stamp<-strftime(time_stamp, format="%D")#day/month/year
time_index<-time_stamp#copy
(volume<-data.frame(table(time_index)))
volume$time_index<-as.character(volume$time_index)
volume_conserv<-volume
save(volume_conserv,file = "volume_conserv.RData")
load("volume_conserv.RData")
total_tweet1=c(sum(volume[1:18,3]),sum(volume[1:18,1]),sum(volume[1:18,2]))
volume<-cbind(volume_conserv$Freq,volume_liberal$Freq,volume_conserv$Freq+volume_liberal$Freq)
volume
head(volume_conserv$Freq)
total_tweet1=c(sum(volume[1:18,3]),sum(volume[1:18,1]),sum(volume[1:18,2]))
total_tweet2=c(sum(volume[19:37,3]),sum(volume[19:37,1]),sum(volume[19:37,2]))
total_tweet3=c(sum(volume[38:55,3]),sum(volume[38:55,1]),sum(volume[38:55,2]))
dim(volume)
dim(volume_conserv)
dim(volume_liberal)
dim(volume_conserv)
head(volume_conserv)
head(volume_conserv,19)
head(volume_conserv,20)
head(volume_conserv)
head(volume_conserv);head(volume_liberal)
merge(volume_conserv,volume_liberal,all = T)
volume_conserv<-rename(volume_conserv,Freq.c=Freq)
volume_liberal<-rename(volume_liberal,Freq.l=Freq)
head(volume_conserv);head(volume_liberal)
merge(volume_conserv,volume_liberal,all = T)
volume<-merge(volume_conserv,volume_liberal,all = T)
is.na(volume)
volume[is.na(volume)]<-0
volume<-mutate(volume,sum=Freq.c+Freq.l)
head(volume)
volume$time_index
total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_conserv),length(tweet_liberal))
total_tweet1=c(sum(volume[1:17,4]),sum(volume[1:17,2]),sum(volume[1:17,3]))
total_tweet2=c(sum(volume[18:36,4]),sum(volume[18:36,2]),sum(volume[18:36,3]))
total_tweet3=c(sum(volume[37:54,4]),sum(volume[37:54,2]),sum(volume[37:54,3]))
total_tweet1
total_tweet2
total_tweet3
