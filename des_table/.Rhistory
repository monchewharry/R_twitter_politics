des<-data.frame(user_num=c(nrow(iden), nrow(filter(iden,ideology=="C")),nrow(filter(iden,ideology=="L")))
, followers_num= c(sum(iden$followers_count),sum(filter(iden,ideology=="C")$followers_count),sum(filter(iden,ideology=="L")$followers_count))
, following_num= rep(NA,3)
, total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_liberal),length(tweet_liberal))
, total_tweet1=c(sum(volume[1:18,3]),sum(volume[1:18,1]),sum(volume[1:18,2]))
,total_tweet2=c(sum(volume[19:37,3]),sum(volume[19:37,1]),sum(volume[19:37,2]))
, total_tweet3=c(sum(volume[38:55,3]),sum(volume[38:55,1]),sum(volume[38:55,2]))
, retweets_perc=c(44.20,43.34,45.58)
, retweets_aver=c(46,38,58)
, mentions_per= c(65.83,65.23,66.79)
, word_aver=c(19.55,19.35,19.89)
, URL_perc= c(50.93,51.17,50.55)
, elite_perc=c((536+537)/nrow(iden),536/nrow(filter(iden,ideology=="C")),537/nrow(filter(iden,ideology=="L")))
,tweetsbytop10_perc=c(sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])/(length(tweet_conserv)+length(tweet_liberal))
,sum(sort(table(id1),decreasing = T)[1:round(0.1*length(id1))])/length(tweet_conserv)
,sum(sort(table(id2),decreasing = T)[1:round(0.1*length(id2))])/length(tweet_liberal)) )
source('~/R_twitter_politics/des_table/Untitled.R')
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])/(length(tweet_conserv)+length(tweet_liberal))
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])/(length(tweet_conserv)+length(tweet_liberal))
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])
round(0.1*length(c(id1,id2)))
sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))]
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))],na.rm = t)
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))],na.rm = T)
sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(id1,id2)))])/(length(tweet_conserv)+length(tweet_liberal))
(length(tweet_conserv)+length(tweet_liberal))
sum(sort(table(id2),decreasing = T)[1:round(0.1*length(id2))])
length(tweet_liberal))
length(tweet_liberal)
sum(sort(table(id1),decreasing = T)[1:round(0.1*length(id1))])
sum(sort(table(id1),decreasing = T)[1:round(0.1*length(id1))],na.rm = T)
length(tweet_conserv)
length(table(id1))
des<-data.frame(user_num=c(nrow(iden), nrow(filter(iden,ideology=="C")),nrow(filter(iden,ideology=="L")))
, followers_num= c(sum(iden$followers_count),sum(filter(iden,ideology=="C")$followers_count),sum(filter(iden,ideology=="L")$followers_count))
, following_num= rep(NA,3)
, total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_liberal),length(tweet_liberal))
, total_tweet1=c(sum(volume[1:18,3]),sum(volume[1:18,1]),sum(volume[1:18,2]))
,total_tweet2=c(sum(volume[19:37,3]),sum(volume[19:37,1]),sum(volume[19:37,2]))
, total_tweet3=c(sum(volume[38:55,3]),sum(volume[38:55,1]),sum(volume[38:55,2]))
, retweets_perc=c(44.20,43.34,45.58)
, retweets_aver=c(46,38,58)
, mentions_per= c(65.83,65.23,66.79)
, word_aver=c(19.55,19.35,19.89)
, URL_perc= c(50.93,51.17,50.55)
, elite_perc=c((536+537)/nrow(iden),536/nrow(filter(iden,ideology=="C")),537/nrow(filter(iden,ideology=="L")))
,tweetsbytop10_perc=c(sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(distinct(id1),distinct(id2))))])/(length(tweet_conserv)+length(tweet_liberal))
,sum(sort(table(id1),decreasing = T)[1:round(0.1*length(distinct(id1)))])/length(tweet_conserv)
,sum(sort(table(id2),decreasing = T)[1:round(0.1*length(distinct(id2)))])/length(tweet_liberal)) )
distinct(id1)
des<-data.frame(user_num=c(nrow(iden), nrow(filter(iden,ideology=="C")),nrow(filter(iden,ideology=="L")))
, followers_num= c(sum(iden$followers_count),sum(filter(iden,ideology=="C")$followers_count),sum(filter(iden,ideology=="L")$followers_count))
, following_num= rep(NA,3)
, total_tweets=c(length(tweet_conserv)+length(tweet_conserv),length(tweet_liberal),length(tweet_liberal))
, total_tweet1=c(sum(volume[1:18,3]),sum(volume[1:18,1]),sum(volume[1:18,2]))
,total_tweet2=c(sum(volume[19:37,3]),sum(volume[19:37,1]),sum(volume[19:37,2]))
, total_tweet3=c(sum(volume[38:55,3]),sum(volume[38:55,1]),sum(volume[38:55,2]))
, retweets_perc=c(44.20,43.34,45.58)
, retweets_aver=c(46,38,58)
, mentions_per= c(65.83,65.23,66.79)
, word_aver=c(19.55,19.35,19.89)
, URL_perc= c(50.93,51.17,50.55)
, elite_perc=c((536+537)/nrow(iden),536/nrow(filter(iden,ideology=="C")),537/nrow(filter(iden,ideology=="L")))
,tweetsbytop10_perc=c(sum(sort(table(c(id1,id2)),decreasing = T)[1:round(0.1*length(c(table(id1),table(id2))))])/(length(tweet_conserv)+length(tweet_liberal))
,sum(sort(table(id1),decreasing = T)[1:round(0.1*length(table(id1)))])/length(tweet_conserv)
,sum(sort(table(id2),decreasing = T)[1:round(0.1*length(table(id2)))])/length(tweet_liberal)) )
View(des)
load("~/Downloads/obamacare_labeled.RData")# The result list is saved
obamacare<-obamacare_labeled
id<-sapply(obamacare, function(x) x$user$id_str)#key
id_freq<-table(id)
id_freq<-table(id)
rm(obamacare)
rm(obamacare_labeled)
library(dplyr)
## all the three time
weight_c<-read.csv("/Users/CDX/R_twitter_politics/labeled_tweet/C/conserv\ retweet\ weight.csv",header = T,stringsAsFactors = F)
weight_l<-read.csv("/Users/CDX/R_twitter_politics/labeled_tweet/L/liberal\ retweet\ weight.csv",header = T,stringsAsFactors = F)
weight_l<-select(weight_l,c(id,name,weight))#the name is screen_name
weight_l<-rename(weight_l,weight1=weight)
weight_c<-select(weight_c,c(id,name,weight))
weight_c<-rename(weight_c,weight2=weight)
total_weight<-merge(weight_c,weight_l)
head(total_weight)
total_weight<-mutate(total_weight,weight=weight1+weight2)
total_weight<-select(total_weight,c(name,id,weight))
head(total_weight)
ide<-iden[c(2,1)]#screen_name,id
ide<-rename(ide,name=screen_name)
head(ide)
total_weight<-merge(ide,total_weight)
sum(duplicated(total_weight$name))
tail(total_weight)
total_weight<-arrange(total_weight,desc(weight))
total_weightl<-filter(total_weight,ideology=="L")
total_weightc<-filter(total_weight,ideology=="C")
weight10_c<-total_weightc[1:10,]
weight10_l<-total_weightl[1:10,]
View(weight10_l)
View(weight10_c)
weight_c<-read.csv("/Users/CDX/R_twitter_politics/labeled_tweet/C/conserv\ retweet\ weight.csv",header = T,stringsAsFactors = F)
weight_l<-read.csv("/Users/CDX/R_twitter_politics/labeled_tweet/L/liberal\ retweet\ weight.csv",header = T,stringsAsFactors = F)
weight_l<-select(weight_l,c(id,name,weight))#the name is screen_name
weight_l<-rename(weight_l,weight1=weight)
weight_c<-select(weight_c,c(id,name,weight))
weight_c<-rename(weight_c,weight2=weight)
total_weight<-merge(weight_c,weight_l)
head(total_weight)
total_weight<-mutate(total_weight,weight=weight1+weight2)
total_weight<-select(total_weight,c(name,id,weight))
head(total_weight)
ide<-iden[c(2,1)]#screen_name,id
ide<-rename(ide,name=screen_name)
library(xlsx)
options(java.parameters = "-Xmx4000m")#solve the memory problem
library(xlsx)
library(dplyr)
iden<-read.xlsx2("~/R_twitter_politics/labeled_tweet/elite/sorted_unique_users.xlsx",1,
colIndex = c(3,5:9,12)
,colClasses =c("character","character","character","logical"
,"numeric","numeric","character"),stringsAsFactors=F)
weight_c<-read.csv("/Users/CDX/R_twitter_politics/labeled_tweet/C/conserv\ retweet\ weight.csv",header = T,stringsAsFactors = F)
weight_l<-read.csv("/Users/CDX/R_twitter_politics/labeled_tweet/L/liberal\ retweet\ weight.csv",header = T,stringsAsFactors = F)
weight_l<-select(weight_l,c(id,name,weight))#the name is screen_name
weight_l<-rename(weight_l,weight1=weight)
weight_c<-select(weight_c,c(id,name,weight))
weight_c<-rename(weight_c,weight2=weight)
total_weight<-merge(weight_c,weight_l)
head(total_weight)
total_weight<-mutate(total_weight,weight=weight1+weight2)
total_weight<-select(total_weight,c(name,id,weight))
head(total_weight)
ide<-iden[c(2,1)]#screen_name,id
ide<-rename(ide,name=screen_name)
head(ide)
total_weight<-merge(ide,total_weight)
sum(duplicated(total_weight$name))
tail(total_weight)
total_weight<-arrange(total_weight,desc(weight))
total_weightl<-filter(total_weight,ideology=="L")
total_weightc<-filter(total_weight,ideology=="C")
weight10_c<-total_weightc[1:10,]
weight10_l<-total_weightl[1:10,]
View(weight10_l)
tweet_total_c<-c()
for(i in seq(10)){
tweet_total_c[i]<- id_freq[names(id_freq)==weight10_c$id[i]]
}
for(i in seq(10)){
print(id_freq[names(id_freq)==weight10_l$id[i]])
}
View(data.frame(tweet_total_c))
tweet_total_l<-c()
for(i in seq(10)){
tweet_total_l[i]<- id_freq[names(id_freq)==weight10_l$id[i]]
}
View(data.frame(tweet_total_l))
text<-c()
for(i in 1:length(weight10_c$id)){
loc<-iden$screen_name==weight10_c$name[i]
text[i]<-(iden$text[loc])
}
View(data.frame(text))
print(text)
View(data.frame(id=1:10,text))
write.csv(data.frame(id=1:10,text),file = "text.csv")
getwd()
text<-c()
for(i in 1:length(weight10_l$id)){
loc<-iden$screen_name==weight10_l$name[i]
text[i]<-(iden$text[loc])
}
write.csv(data.frame(id=1:10,text),file = "text.csv")
cross_num<-c()
for(i in 1:10){
cross<-function(x){
if(is.null(x$retweeted_status)) return(FALSE)
else{
if(x$retweeted_status$user$screen_name==weight10_l$id[i]) return(TRUE)
}
}
a<-sapply(tweet_conserv,cross)
cross_num[i]<-sum(unlist(a))
}
rm(iden)
load("~/Downloads/tweet_conserv.RData")
cross_num<-c()
for(i in 1:10){
cross<-function(x){
if(is.null(x$retweeted_status)) return(FALSE)
else{
if(x$retweeted_status$user$screen_name==weight10_l$id[i]) return(TRUE)
}
}
a<-sapply(tweet_conserv,cross)
cross_num[i]<-sum(unlist(a))
}
View(ide)
cross_num
cross_num<-c()
cross<-function(x){
if(is.null(x$retweeted_status)) return(FALSE)
else{
if(x$retweeted_status$user$screen_name==weight10_l$id[1]) return(TRUE)
}
}
a<-sapply(tweet_conserv,cross)
a
unlist(a)
sum(unlist(a))
i=4
cross<-function(x){
if(is.null(x$retweeted_status)) return(FALSE)
else{
if(x$retweeted_status$user$screen_name==weight10_l$id[i]) return(TRUE)
}
}
a<-sapply(tweet_conserv,cross)
cross_num[i]<-sum(unlist(a))
cross_num
weight10_l$id[1]
cross_num<-c()
for(i in 1:10){
cross<-function(x){
if(is.null(x$retweeted_status)) return(FALSE)
else{
if(x$retweeted_status$user$id_str==weight10_l$id[i]) return(TRUE)
}
}
a<-sapply(tweet_conserv,cross)
cross_num[i]<-sum(unlist(a))
}
a
cross_num
View(data.frame(cross_num))
rm(tweet_conserv)
load("~/Downloads/tweet_liberal.RData")
cross_num<-c()
cross<-function(x){
else{
}
a<-sapply(tweet_liberal,cross)
}
if(is.null(x$retweeted_status)) return(FALSE)
}
View(data.frame(cross_num))
for(i in 1:10){
cross_num[i]<-sum(unlist(a))
if(x$retweeted_status$user$id_str==weight10_c$id[i]) return(TRUE)
cross_num<-c()
for(i in 1:10){
cross<-function(x){
cross_num<-c()
for(i in 1:10){
cross<-function(x){
if(is.null(x$retweeted_status)) return(FALSE)
else{
if(x$retweeted_status$user$id_str==weight10_c$id[i]) return(TRUE)
}
}
a<-sapply(tweet_liberal,cross)
cross_num[i]<-sum(unlist(a))
}
View(data.frame(cross_num))
load("~/Downloads/tweet_conserv.RData")
tweet_liberal[[123]]$ideology
tweet_liberal[[123]]$ideology;tweet_liberal[[123]]$user$id_str
ideo123<-sapply(tweet_conserv, function(x) if(x$user$id_str == "15099539") return(x$ideology))
unlist(ideo123)
ideo123
ideo123<-sapply(tweet_conserv, function(x) if(x$user$id_str == "813286") return(x$ideology))
ideo123
unlist(ideo123)
ideoOBAMA2<-sapply(tweet_liberal,
function(x) if(x$user$id_str == "813286") return(x$ideology))
ideoOBAMA2
unlist(ideoOBAMA2)
ideoOBAMA<-sapply(tweet_conserv,
function(x) if(x$user$id_str == "11866582") return(x$ideology))
unlist(ideoOBAMA)
ideoOBAMA2<-sapply(tweet_liberal,
function(x) if(x$user$id_str == "11866582") return(x$ideology))
unlist(ideoOBAMA2)
